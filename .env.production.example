# ============================================================
# Aerial Survey Manager - Production Environment Configuration
# 외부 기관 배포용 환경 설정 파일
# ============================================================
#
# 사용법:
#   1. 이 파일을 .env로 복사: cp .env.production.example .env
#   2. 아래 변수들을 실제 환경에 맞게 수정
#   3. docker compose -f docker-compose.prod.yml up -d
#
# 또는 설치 스크립트 사용: ./scripts/install.sh
#

# ============================================================
# [필수] 보안 설정 - 반드시 변경하세요!
# ============================================================

# PostgreSQL 데이터베이스 비밀번호
# 생성 방법: openssl rand -base64 24
POSTGRES_PASSWORD=CHANGE_THIS_TO_SECURE_PASSWORD

# JWT 인증 서명 키 (최소 32자 이상)
# 생성 방법: openssl rand -hex 32
JWT_SECRET_KEY=CHANGE_THIS_TO_AT_LEAST_32_CHARACTER_SECRET_KEY

# MinIO (S3 호환 저장소) 인증 정보
MINIO_ACCESS_KEY=aerial-admin
# 생성 방법: openssl rand -base64 32
MINIO_SECRET_KEY=CHANGE_THIS_TO_SECURE_MINIO_SECRET

# ============================================================
# [필수] 네트워크 설정
# ============================================================

# 접속 도메인 (DNS 또는 IP)
# 예: app.example.com 또는 192.168.1.100
DOMAIN=localhost

# 웹 서비스 포트
WEB_PORT=8081

# MinIO Public Endpoint (S3 Multipart Upload용)
# 브라우저에서 접근하는 주소와 동일해야 함
# 형식: {DOMAIN}:{WEB_PORT} 또는 도메인만 (80/443 포트 사용 시)
# 예: app.example.com:8081 또는 app.example.com
MINIO_PUBLIC_ENDPOINT=localhost:8081

# ============================================================
# [필수] 저장소 경로 설정
# ============================================================
# 주의: 대용량 디스크 경로로 설정하세요 (최소 1TB 이상 권장)
# MinIO는 디스크 용량이 10% 이하로 떨어지면 업로드를 거부합니다.

# 이미지 처리 작업 디렉토리
PROCESSING_DATA_PATH=/data/aerial-survey/processing

# MinIO 저장소 (업로드된 이미지, 결과물)
MINIO_DATA_PATH=/data/aerial-survey/minio

# ============================================================
# [필수] 라이선스 설정
# ============================================================

# Metashape 라이선스 키 (정사영상 처리 엔진)
# 라이선스가 없으면 처리 기능을 사용할 수 없습니다
METASHAPE_LICENSE_KEY=

# ============================================================
# [선택] 외부 처리 엔진 (External API)
# ============================================================
# 외부 처리 엔진을 사용하는 경우에만 설정

# EXTERNAL_ENGINE_URL=https://external-engine.example.com
# EXTERNAL_ENGINE_API_KEY=your-external-api-key

# ============================================================
# [선택] 고급 설정
# ============================================================

# PostgreSQL 포트 (기본값: 5434)
# DB_PORT=5434

# Redis 포트 (기본값: 6380)
# REDIS_PORT=6380

# MinIO API 포트 (기본값: 9002)
# MINIO_API_PORT=9002

# MinIO Console 포트 (기본값: 9003)
# MINIO_CONSOLE_PORT=9003

# Flower 모니터링 포트 (기본값: 5555)
# FLOWER_PORT=5555

# ============================================================
# [선택] 오프라인 지도 설정
# ============================================================
# 인터넷 없이 지도를 표시하려면 오프라인 타일 데이터가 필요합니다.
# 타일 형식: {TILES_PATH}/{z}/{x}/{y}.png (OSM 형식)

# 오프라인 타일맵 사용 여부 (true/false)
USE_OFFLINE_TILES=false

# 타일 데이터 경로 (오프라인 모드에서만 사용)
TILES_PATH=/data/tiles

# ============================================================
# [선택] SSL/HTTPS 설정
# ============================================================
# SSL 인증서는 ./ssl/ 디렉토리에 배치
# - ./ssl/cert.pem : 인증서 파일
# - ./ssl/key.pem  : 개인키 파일

# HTTPS 포트 (기본값: 443)
# HTTPS_PORT=443

# HTTP를 HTTPS로 리다이렉트 (true/false)
# SSL_REDIRECT=true
